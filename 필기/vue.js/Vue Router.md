# Vue Router



## 1. UX & UI

- ### UX (User Experience)

  - 유저와 가장 가까이에 있는 분야, 데이터를 기반으로 유저를 조사하고 분석해서 개발자, 디자이너가 이해할 수 있게 소통
  - 유저가 느끼는 느낌, 태도, 행동을 디자인



- ### 좋은 UX를 설계하기 위해서

  - 사람들의 마을과 생각을 이해하고 정리해서 제품에 녹여내는 과정이 필요하다.
  - 유저 리서치, 데이터 설계 및 정제, 유저 시나리오, 프로토타입 설계 등이 필요하다.



- ### UI (User Interface)

  - 유저에게 보여지는 화면을 디자인
  - UX를 고려한 디자인을 반영, 이 과정에서 기능 개선 혹은 추가가 필요한 경우 Front-end 개발자와 가장 많이 소통한다.



- ### Interface

  - 서로 다른 두 개의 시스템, 장치 사이에서 정보나 신호를 주고받는 경우의 접점
    - 사용자가 기기를 쉽게 동작 시키는데 도움을 주는 시스템



- ### 좋은 UI를 설계하기 위해서

  - 심미적인 부분만 중요하기보다 사용자가 쉽고 편리하게 사용할 수 있도록 하는 부분까지 고려되어야 한다.
  - 통일된 디자인을 위한 디자인 시스템, 소통을 위한 중간 산출물, 프로토타입 등이 필요하다.
  - UI 디자인에 있어 가장 중요한 것은 **협업**이다.

---



## 2. Vue Router

- ### Routing

  - 네트워크에서 경로를 선택하는 프로세스
  - 웹 서비스에서의 라우팅
    - 유저가 방문한 URL에 대한 적절한 결과를 응답하는 것



- ### Routing in SSR

  - Server가 모든 라우팅을 통제
  - URL로 요청이 들어오면 응답으로 완성된 HTML 제공
  - Routing에 대한 결정권을 서버가 가진다.



- ### Routing in SPA / CSR

  - 서버는 하나의 HTML 만을 제공한다.
  - 이후에 모든 동작은 하나의 HTML 문서 위에서 JavaScript 코드를 활용한다.
  - **하나의 URL만 가질 수 있다.**



- ### Vue Router

  - Vue의 공식 라우터
  - SPA 상에서 라우팅을 쉽게 개발할 수 있는 기능을 제공한다.
  - 라우트에 컴포넌트를 매핑한 후, 어떤 URL에서 렌더링 할지 알려준다.
    - SPA를 MPA처럼 URL을 이동하면서 사용 가능하다.
    - **MPA**
      - 여러 개의 페이지로 구성된 애플리케이션
      - SSR 방식으로 렌더링



- ### Vue Router 시작하기

  - ![화면 캡처 2022-11-09 091416](C:.\화면 캡처 2022-11-09 091416.png)
    - **History mode**
      - 브라우저의 History API를 활용한 방식
        - 새로고침 없이 URL 이동 기록을 남길 수 있다.
      - History mode를 사용하지 않으면 Default 값인 hash mode로 설정된다.
        - ex) 'http://localhost:8080#index'

  

  - **router-link**
    - **a 태그와 비슷한 기능 -> URL을 이동시킨다.**
      - routes에 등록된 컴포넌트와 매핑된다.
      - 히스토리 모드에서 router-link는 클릭 이벤트를 차단하여 a 태그와 달리 브라우저가 페이지를 다시 로드하지 않도록 한다.
    - **목표 경로는 'to' 속성으로 지정된다.**
    - 기능에 맞게 HTML에서 a 태그로 rendering 되지만, 필요에 따라 다른 태그로 바꿀 수 있다.

  

  - **router-view**
    - 주어진 URL에 대해 일치하는 컴포넌트를 렌더링 하는 컴포넌트
    - 실제 component가 DOM에 부착되어 보이는 자리를 의미한다.
    - router-link를 클릭하면 routes에 매핑된 컴포넌트를 렌더링한다.

  

  - **src/router/index.js**
    - 라우터에 관련된 정보 및 설정이 작성 되는 곳
    - routes에 URL과 컴포넌트를 매핑

  

  - **src/Views**
    - router-view에 들어갈 component 작성
    - 기존에 컴포넌트를 작성하던 곳은 components 폴더 뿐이지만 이제 두 폴더로 나뉘어진다.
    - **views/**
      - routes에 매핑되는 컴포넌트, <router-view>의 위치에 렌더링 되는 컴포넌트를 모아두는 폴더
      - 다른 컴포넌트와 구분하기 위해 View로 끝나도록 만드는 것을 권장한다.
    - **components/**
      - routes에 매핑된 컴포넌트의 하위 컴포넌트를 모아두는 폴더



- ### 선언적 방식 네비게이션

  - router-link의 **'to'** 속성으로 주소 전달
    - routes에 등록된 주소와 매핑된 컴포넌트로 이동
    - ![화면 캡처 2022-11-09 092616](C:.\화면 캡처 2022-11-09 092616.png)



- ### Named Routes

  - 이름을 가지는 routes
    - Django에서 path 함수의 name 인자의 활용과 같다.
    - ![화면 캡처 2022-11-09 092729](C:.\화면 캡처 2022-11-09 092729.png)
  - 동적인 값을 사용하기 때문에 v-bind를 사용해야 정상적으로 작동한다.
    - ![화면 캡처 2022-11-09 092814](C:.\화면 캡처 2022-11-09 092814.png)



- ### 프로그래밍 방식 네비게이션

  - Vue 인스턴스 내부에서 라우터 인스턴스에 $router로 접근 할 수 있다.
  - 다른 URL로 이동하려면 **this.$router.push**를 사용한다.
    - history stack에 이동할 URL을 넣는(push) 방식
    - history stack에 기록이 남기 때문에 사용자가 브라우저의 뒤로 가기 버튼을 클릭하면 이전 URL로 이동할 수 있다.
  - <router-link :to="">를 클릭하는 것과 $router.push()를 호출하는 것은 같은 동작이다.
    - ![화면 캡처 2022-11-09 093122](C:.\화면 캡처 2022-11-09 093122.png)



- ### Dynamic Route Matching

  - 동적 인자 전달
    - URL의 특정 값을 변수처럼 사용할 수 있다.
    - **$route.params**로 변수에 접근 가능하다.
    - HTML에서 직접 사용하기 보다는 data에 넣어서 사용하는 것을 권장한다.
    - ![화면 캡처 2022-11-09 093253](C:.\화면 캡처 2022-11-09 093253.png)
    - ![화면 캡처 2022-11-09 093359](C:.\화면 캡처 2022-11-09 093359.png)
    - ![화면 캡처 2022-11-09 093446](C:.\화면 캡처 2022-11-09 093446.png)



- ### Dynamic Route Matching - 선언적 방식 네비게이션

  - ![화면 캡처 2022-11-09 093619](C:.\화면 캡처 2022-11-09 093619.png)
  - ![화면 캡처 2022-11-09 093705](C:.\화면 캡처 2022-11-09 093705.png)



- ### route에 컴포넌트를 등록하는 또 다른 방법

  - ![화면 캡처 2022-11-09 093756](C:.\화면 캡처 2022-11-09 093756.png)



- ### lazy-loading

  - 모든 파일을 한 번에 로드하려고 하면 모든 걸 다 읽는 시간이 매우 오래 걸린다.
  - 미리 로드를 하지 않고 특정 라우트에 방문할 때 매핑된 컴포넌트의 코드를 로드하는 방식
    - **모든 파일을 한 번에 로드하지 않아도 되기 때문에 최초에 로드하는 시간이 빨라진다.**
    - 당장 사용하지 않을 컴포넌트는 먼저 로드하지 않는 것이 핵심이다.

---



## 3. Navigation Guard

- ### 네비게이션 가드

  - Vue router를 통해 특정 URL에 접근할 때 다른 url로 redirect를 하거나 해당 URL로의 접근을 막는 방법



- ### 네비게이션 가드의 종류

  - **전역 가드**
    - 애플리케이션 전역에서 동작
  - **라우터 가드**
    - 특정 URL에서만 동작
  - **컴포넌트 가드**
    - 라우터 컴포넌트 안에 정의



- ### 전역 가드

  - 다른 url 주소로 이동할 때 항상 실행
  - router/index.js에 **router.beforeEach()**를 사용하여 설정
  - router 객체 아랫쪽에 작성한다.
    - ![화면 캡처 2022-11-09 141114](C:.\화면 캡처 2022-11-09 141114.png)
  - 콜백 함수의 값으로 3개의 인자를 받는다.
    - **to : 이동할 URL 정보가 담긴 Route 객체**
    - **from : 현재 URL 정보가 담긴 Route 객체**
    - **next : 지정한 URL로 이동하기 위해 호출하는 함수**
      - **콜백 함수 내부에서 반드시 한 번만 호출되어야 한다.**
      - **기본적으로 to에 해당하는 URL로 이동**
  - URL이 변경되어 화면이 전환되기 전 router.beforeEach()가 호출된다.
    - 화면이 전환되지 않고 대기 상태가 된다.
  - 변견된 URL로 라우팅하기 위해서는 next()를 호출해주어야 한다.
    - **next()가 호출되기 전까지 화면이 전환되지 않는다.**
  - ![화면 캡처 2022-11-09 094705](C:.\화면 캡처 2022-11-09 094705.png)



- ### Login 여부에 따른 라우팅 처리

  - ![화면 캡처 2022-11-09 095624](C:.\화면 캡처 2022-11-09 095624.png)
  - ![화면 캡처 2022-11-09 095649](C:.\화면 캡처 2022-11-09 095649.png)
  - ![화면 캡처 2022-11-09 095722](C:.\화면 캡처 2022-11-09 095722.png)
  - ![화면 캡처 2022-11-09 095734](C:.\화면 캡처 2022-11-09 095734.png)
  - ![화면 캡처 2022-11-09 095836](C:.\화면 캡처 2022-11-09 095836.png)
  - ![화면 캡처 2022-11-09 095908](C:.\화면 캡처 2022-11-09 095908.png)



- ### 라우터 가드

  - 전체 route가 아닌 특정 route에 대해서만 가드를 설정하고 싶을 때 사용한다.
  - **beforeEnter()**
    - route에 진입했을 때 실행된다.
    - 라우터를 등록한 위치에 추가
    - 매개변수, 쿼리, 해시 값이 변경될 때는 실행되지 않고 다른 경로에서 탐색할 때만 실행된다.
    - 콜백 함수는 to, from, next를 인자로 받는다.



- ### Login 여부에 따른 라우팅 처리

  - ![화면 캡처 2022-11-09 100203](C:.\화면 캡처 2022-11-09 100203.png)
  - Login을 제외한 다른 페이지로 이동하면 라우터 가드를 따로 설정해주지 않았기 때문에 라우터 가드가 동작하지 않는다.



- ### 컴포넌트 가드

  - 특정 컴포넌트 내에서 가드를 지정하고 싶을 때 사용한다.
  - **beforeRouteUpdate()**
    - 해당 컴포넌트를 렌더링하는 경로가 변경될 때 실행



- ### Params 변화 감지

  - ![화면 캡처 2022-11-09 100423](C:.\화면 캡처 2022-11-09 100423.png)



- ### 404 Not Found

  - 사용자가 요청한 리소스가 존재하지 않을 때 응답
  - ![화면 캡처 2022-11-09 100529](C:.\화면 캡처 2022-11-09 100529.png)



- ### 요청한 리소스가 존재하지 않는 경우

  - 모든 경로에 대해서 404 page로 redirect 시키기
    - 기존에 명시한 경로가 아닌 모든 경로가 404 page로 redirect 된다.
    - 이때, **routes에 최하단부에 작성해야 한다.**
    - ![화면 캡처 2022-11-09 100647](C:.\화면 캡처 2022-11-09 100647.png)



- ### 형식은 유효하지만 특정 리소스를 찾을 수 없는 경우

  - ![화면 캡처 2022-11-09 100815](C:.\화면 캡처 2022-11-09 100815.png)
  - ![화면 캡처 2022-11-09 100841](C:.\화면 캡처 2022-11-09 100841.png)
  - ![화면 캡처 2022-11-09 100919](C:.\화면 캡처 2022-11-09 100919.png)
  - ![화면 캡처 2022-11-09 100947](C:.\화면 캡처 2022-11-09 100947.png)
  - ![화면 캡처 2022-11-09 101010](C:.\화면 캡처 2022-11-09 101010.png)



- ### Optional Chaining

  - Optional Chaining(?.) 앞의 평가 대상이 undefined나 null이면 error가 발생하지 않고 undefined를 반환한다.



- ### Date in JavaScript

  - JavaScript에서 시간을 나타내는 Date 객체는 1970년 1월 1일 UTC 자정과의 시간 차이를 밀리초로 나타내는 정수 값을 담는다.
    - **Date().toLocaleString()을 사용하여 변환한다.**
